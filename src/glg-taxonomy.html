<link rel="import" href="../node_modules/ui-typeahead/src/ui-typeahead.html" />
<link rel="import" href="../node_modules/core-websocket/build/core-websocket.html" />
<link rel="import" href="../node_modules/ui-pill/src/ui-pill.html" />

<polymer-element name="glg-taxonomy" attributes="type urls">
<template>
  <link rel="stylesheet" type="text/css" href="./glg-taxonomy.less">

    <ui-typeahead id="typeahead" placeholder="Search {{type}} taxonomy" debounce="200">
      <content select="icon"></content>

      <template repeat="{{selected}}">
        <item><ui-pill>{{nodeName}}</ui-pill></item>

      </template>
      <!-- dynamically templated items -->
      <template id="typeahead-template" repeat="{{item, i in items}}">

        <ui-typeahead-item on-click="{{onClick}}" class="{{ {header: item.header} | tokenList }}">
          <template if="{{item.header}}" repeat="{{ part, d in item.parts}}">
            <span on-click="{{partClicked}}">
              <span hidden?="{{d == 0}}">&nbsp;&gt;&nbsp;</span><span>{{part}}</span>
            </span>
          </template> 
      
          <template if="{{!item.header}}">
            
            <div>

              <span style="margin-left: {{ (item.depth - item.groupDepth) * 15 }}px;">
                <span class="icon">
                  
                </span>
                <span title="{{item.fullPath}}">{{ item.nodeName }}</span>
              </span>
            </div>

          </template>

        </ui-typeahead-item>
        
      </template>

    </ui-typeahead>

    <core-websocket id="websocket" urls="{{urls}}"></core-websocket>

</template>
<script src="./glg-taxonomy.litcoffee"></script>
</polymer-element>
